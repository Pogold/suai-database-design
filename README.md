# Проектирование баз данных

## Вариант №6
Поликлиника: прием, пациент, процедура/прием, врач, стоимость
1. (a) Пациенты, приходившие на любые процедуры, связанные с лазером (лазер в любом месте
названия)
2. (б) Врач, проводивший одному пациенту и прием и процедуру
3. (в) Процедуры, которые никому не делали
4. (г) Процедуры с наименьшей стоимостью, которые проводили Иванову Ивану Ивановичу
5. (д) Пациент, ходивший на наибольшее количество процедур
6. (е) Врач, проводивший все процедуры
7. (ж) Врач, не принимавший к Иванова Ивана Ивановича, но проводивший ему процедуру

## Задание

### ЛР №1 Разработка физической модели базы данных с учетом декларативной ссылочной целостности

Создать физическую модель базы данных, находящуюся в третьей нормальной форме в
соответствии с заданным вариантом. Расписать ссылочную целостность БД в таблице

![image](https://user-images.githubusercontent.com/93859142/173085796-89d22959-5459-4109-b5cd-394781c9812f.png)



### ЛР №2 Создание и модификация базы данных и таблиц базы данных

По аналогии с примерами, приведенными в п. 1 и создать базу данных с разработанной
физической моделью. Продемонстрировать умение добавить и удалить столбец командой alter table

### ЛР №3 Заполнение таблиц и модификация данных

По аналогии с примерами, приведенными в п. 1 Выполнить вставку тестовых данных в
таблицы, созданные в ходе выполнения лабораторной работы 2. В строках, вставляемых в таблицы,
должны быть данные как удовлетворяющие, так и не удовлетворяющие условиям запросов,
приведенных в варианте задания. Необходимо привести свои пример использования оператором update
и delete и merge

### ЛР №4 Разработка SQL запросов: виды соединений и шаблоны

По аналогии с примерами, приведенными в п. 1 и 2 реализовать запросы а) .. в), указанные в
варианте задания. Все запросы должны не содержать вложенных запросов или агрегатных функций.
(Используйте псевдонимы)

### ЛР №5 Разработка SQL запросов: запросы с подзапросами

По аналогии с примерами, приведенными в п. 1 реализовать запросы г) .. ж), указанные в
варианте задания.

* Один из запросов на максимум/минимум реализовать с помощью директивы all
* Запрос на «все» (реляционное деление) реализовать с помощью 2 not exists
* Запросы на разность реализовать в 3 вариантах: Not in, except (MySQL не поддерживает,
поэтому только синтаксис), с использованием левого/правого соединения

### ЛР №6 Хранимые процедуры

По аналогии с примерами, приведенными в п. 1, создать в БД ХП, реализующие:
- вставку с пополнением справочников (вставляется информация о студенте, если указанный номер
группы отсутствует в БД, запись добавляется в таблицу с перечнем групп) (получаем ссылку на
внешний ключ по значению данного из родительской таблицы);
- удаление с очисткой справочников – удаление всех зависимых данных (удаляется информация о
студенте, если в его группе нет больше студентов, запись удаляется из таблицы с перечнем групп);
- каскадное удаление (перед удалением записи о группе удаляются записи обо всех студентах этой
группы);
- вычисление и возврат значения агрегатной функции (т.к. агрегатная функция дает единственный
результат);
- формирование статистики во временной таблице (например, для рассматриваемой БД — для
каждого факультета: количество групп, количество обучающихся студентов, ко-личество изучаемых
дисциплин, количество сданных дисциплин, средний балл по факульте-ту).

### ЛР №7 Триггеры. Обеспечение активной целостности данных базы данных

По аналогии с примерами, приведенными в п. 1 реализовать для своей базы данных триггеры
для всех событий (insert,delete, update) до и после. Часть из которых будет обеспечивать ссылочную
целостность, остальные могут иметь другое назначение из 3 предложенных. Вычислимые поля
можно добавить при необходимости

### ЛР №8 Проектирование взаимодействия базы данных и приложения

Создать приложение–форму с 2 способами подсоединения приложения к базе данных: 
- Соединение через компоненты ADO.NET или его аналога с помощью строки связи.  
 При этом отображаться должны 2 таблицы/элемента данных (не обязательно в форме таблицы, может быть просто текст): 
 Одна через DataGridView, с подключением источника данных  
 Другая через чтение результатов запроса SqlCommand в цикле
- С использованием технологии ORM (Object-Relational Mapping) с отображение третьей таблицы элемента данных

### ЛР №9 Разработка Объектно-реляционные базы данных. Проектирование и создание

Спроектировать физическую модель базы данных, находящуюся в третьей нормальной форме и включающей наследование 
и хотя бы один пользовательский тип в соответствии с заданным вариантом. 
Написать соответствующий скрипт создания базы данных

Физическая модель БД

![image](https://user-images.githubusercontent.com/93859142/187998628-9780797f-ef1e-43d2-bcb4-98320b0da1c0.png)

### ЛР №10 Разработка Объектно-реляционные базы данных. Манипуляция данными и пользовательские операторы

Выполнить вставку тестовых данных в таблицы, созданные в ходе выполнения лабораторной работы 9. 
Сделать запрос выборки с условием к таблицам предку и потомку. 
Придумать и создать пользовательский оператор для своей предметной области
Придумать и создать пользовательскую агрегатную функцию для своей предметной области

### ЛР №11 Разработка документной базы данных

BSON модель БД

![image](https://user-images.githubusercontent.com/93859142/187999337-b56ea99a-c3a0-499e-94ea-43fa8ffc3570.png)

Необходимо спроектировать структуру json файла, 
соответствующую предметной области по варианту задания.


### ЛР №12 Манипулирование данными в документной базе данных

Привести пример обновления и удаления данных из базы
Выполнить запросы на выборку по варианту задания

## Замечание

> Скрипты представлены для Mysql до Лабораторной работы №8

> для PostgreSQL ЛР№9,10

> для MongoDB ЛР№11,12 
